{
  "date": "2020-04-08T17:45:13.386Z",
  "body": "A trendy feature for website homepages right now is a transparent navigation bar on top of a hero image. You see this a lot on business websites that are chalk full of high end design. As the page is scrolled down, the transparency usually replaced by a solid color to provide readability on light or dark backgrounds.\n\nVuetify gives you a lot of these features out of the box such as a transparent nav bar that can elevate, shrink and hide on scroll based on a given threshold value. One important feature I found missing was the ability to change the background color on scroll.\n\nI found myself in need of this feature when trying to replicate the effect described above. Vuetify's `v-app-bar` component works wonderfully in the other respects and has come a long way since version 1. It has lots of features that can easily be set simply adding the props as documented.\n\n## A typical v-app-bar component\n\nHere is an typical `v-app-bar` component in a layout file.\n\nIn `layouts/default.vue`:\n\n```html\n<v-app-bar\n  app\n  dark\n  elevate-on-scroll\n  hide-on-scroll\n  id=\"nav\"\n  scroll-threshold=\"250\"\n  shrink-on-scroll\n  tile\n>\n  <a id=\"brand\" href=\"/\">\n    <v-toolbar-title\n      class=\"align-self-center py-0 black--text\"\n      :class=\"{'pl-5': $breakpoint.mdAndUp, 'pl-0': $breakpoint.smAndDown}\"\n    >\n      Brand\n    </v-toolbar-title>\n  </a>\n  <v-spacer />\n  <v-list class=\"py-0\" color=\"transparent\" rounded>\n    <v-list-item to=\"/about\" router exact>Documentation</v-list-item>\n    <v-list-item to=\"/about\" router exact>About</v-list-item>\n    <v-list-item to=\"/about\" router exact>Contact</v-list-item>\n  </v-list>\n</v-app-bar>\n```\n\nJust by adding these 4 properties to the `v-app-bar` component (elevate-on-scroll, hide-on-scroll, scroll-threshold=\"250\", shrink-on-scroll), we have a navigation bar that passes most test on functionality.\n\nThe biggest issue is that, if we are not in the hero area, and try to scroll up so that that the nav reappears, it is still transparent and thus not readable. In my project, the hero was dark but the rest of the section were light so my light text got lost in the background and was unreadable.\n\nTo fix this, we need to change the background color of `v-app-bar` when we have scrolled past the hero image section. Unfortunately, this is where the functionality of `v-app-bar` falls short.\n\n## Using Vue directives in Nuxt\n\nIf you didn't already know, there is no default `v-on:scroll` directive in Vue. It must be added as a [custom directive](https://vuejs.org/v2/cookbook/creating-custom-scroll-directives.html). This is documented well enough but, since I'm using [Nuxt.js](https://nuxtjs.org/) for these projects, it's not as simple as adding this code to the Vue component. To use Vue custom directives with Nuxt, the simplest way is to add them as a Nuxt plugin.\n\n## Using Plugins in Nuxt\n\nNuxt makes it easy to add some custom code and call it a plugin. In the `Plugins` folder, add a new file name `directives.js`. In this file, we are going to import Vue and add the boilerplate code provided in the custom scroll directives link.\n\n```javascript\nimport Vue from 'vue'\n\nVue.directive('scroll', {\n  inserted: function(el, binding) {\n    let f = function(evt) {\n      if (binding.value(evt, el)) {\n        window.removeEventListener('scroll', f)\n      }\n    }\n    window.addEventListener('scroll', f)\n  }\n})\n```\n\nThen, in `nuxt.config.js`, add the plugin path to the `plugins` object:\n\n```javascript\n/*\n** Plugins to load before mounting the App\n*/\nplugins: [\n    '~/plugins/directives',\n],\n```\n\nThis will make the directive globally available to Vue components as a `v-scroll` prop you can add.\n\n## Setting Up the v-app-bar Component\n\nAll we need to do now is set up the `v-app-bar` component to use `v-scroll`.\n\nIn `layouts/default.vue`:\n\n```html\n<v-app-bar\n  app\n  :color=\"navBelowFold ? 'primary' : 'transparent'\"\n  dark\n  elevate-on-scroll\n  id=\"nav\"\n  hide-on-scroll\n  ref=\"nav\"\n  scroll-threshold=\"250\"\n  shrink-on-scroll\n  tile\n  v-scroll=\"handleScroll\"\n>\n  <a id=\"brand\" href=\"/\">\n    <v-toolbar-title\n      class=\"align-self-center py-0 black--text\"\n      :class=\"{'pl-5': $breakpoint.mdAndUp, 'pl-0': $breakpoint.smAndDown}\"\n    >\n      Brand\n    </v-toolbar-title>\n  </a>\n  <v-spacer />\n  <v-list class=\"py-0\" color=\"transparent\" rounded>\n    <v-list-item to=\"/about\" router exact>Documentation</v-list-item>\n    <v-list-item to=\"/about\" router exact>About</v-list-item>\n    <v-list-item to=\"/about\" router exact>Contact</v-list-item>\n  </v-list>\n</v-app-bar>\n```\n\n```javascript\nexport default {\n  data() {\n    return {\n      navBelowFold: false\n    }\n  },\n  methods: {\n    handleScroll: function(event) {\n      if (window.pageYOffset > 150) {\n        this.navBelowFold = true\n        console.log('Nav is below fold')\n      } else {\n        this.navBelowFold = false\n        console.log('Nav is above fold')\n      }\n    }\n  }\n}\n```\n\nOn `v-app-bar` are adding a ref property so that we can work with this element in the script section of the component.\n\nWe are also adding a v-bind shorthand (:) to the color property with a ternary conditional checking the value of `navBelowFold` which then sets the solid color(`primary`) if `true` and `transparent` if `false`.\n\nFinally, we are adding the `v-scroll` prop set to the method we want to call, `handleScroll`\n\nIn the script section, we have the initial declaration of the reactive boolean `navBelowFold` with toggles the color in `v-app-bar` in the template.\n\nWe also have the method declaration of `handleScroll` which is called by the `v-scroll` directive on `v-app-bar`.\n\nThe `handleScroll` method is passed the scroll event from the `v-scroll` directive and does a conditional check of the `pageYOffset` value of the browser window which sets `navBelowFold` to `true` when below the fold and `false` when above the fold.\n\nAll this together, should allow `v-app-bar` to have a solid background outside of the hero area and a transparent background in the hero section. You can easily adjust the scroll offset to suit you specific section heights as well.\n\n## Transitioning the background color\n\nThe final and simplest part of this process is making sure there is a smooth transition for the background color change.\n\nTo do this simply set a CSS transition on the `v-app-bar` component.\n\n```css\n<style>\n #nav.v-app-bar {\n    .v-toolbar--prominent {\n        .v-toolbar__content {\n            transition: background-color 0.5s cubic-bezier(1, 0, 0, 1);\n        }\n    }\n }\n</style>\n```",
  "title": "Vuetify App Bar Background Transitions",
  "description": "How to create a full-featured v-app-bar component",
  "thumbnail": "/img/nuxt-vuetify.svg",
  "hero": "/img/nuxt-vuetify.svg"
}