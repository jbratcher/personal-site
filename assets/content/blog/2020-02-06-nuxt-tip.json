{
  "title": "Nuxt Tip",
  "date": "2020-02-06T15:20:45.342Z",
  "description": "Using Env Variables in Vue Components",
  "body": "Abstraction is key when keeping code dry and I'm always searching for better ways to do things when time permits.  \n\nWhile developing [Nuxt Netlify CMS Starter Kit](https://www.jeremybratcher.com/blog/2020-01-22-getting-started-with-nuxt-netlify-cms), I realized it would be ideal if you could define the application title and description in the `package.json` file and have that used to populate the head title and description information.  It could also be useful directly inside the layout component (or any components really).\n\n### Setting the Title and Description for the Head\n\nWith Nuxt, you can pull out environment variables from the `package.json` file easily by using `process.env`.  In `nuxt.config.js`, you can set the head title and description.\n\n###### \\* requires server restart\n\nin `nuxt.config.js`\n\n```\nexport default {\n  head: {\n    title: process.env.npm_package_name || '',\n    description: process.env.npm_package_description || ''\n  },\n}\n```\n\nA caveat here is that NPM packages names can only be lowercase and cannot contain spaces.  Since this format isn't consistent with a title's usual format, a string helper function from the included `utils` directory is used to properly format the title.\n\nfrom `utils/str-utils.js`\n\n```\n/**\n * UPPERCASE first char of each word.\n */\nexport function titleCase(str) {\n    return lowerCase(str).replace(/^\\w|\\s\\w/g, upperCase);\n}\n```\n\nin `nuxt.config.js`\n\n```\nimport * as strUtil from './utils/str-utils.js'\n\n// uppercase first letter of each word and replace hyphens with spaces\nconst title = strUtil.titleCase(process.env.npm_package_name.replace(/-/g, \" \"));\n\nexport default {\n  head: {\n    title: title || '',\n    description: process.env.npm_package_description || ''\n  },\n}\n```\n\n### Setting the Title and Description in Vue Components\n\nIt can also be useful to have these variables for use in Vue components.  For example, I used the title and description both in the default layout component.  This component contains the global header and footer and uses the package name as the default brand text in the header and title and description for info in the footer.\n\nTo access the same environmental variables in components, they must first be set in the `env` property of `nuxt.config.js`.\n\n###### \\* requires server restart\n\nin `nuxt.config.js`\n\n```\nenv: {\n  title: title || '',\n  description: process.env.npm_package_description || '',\n},\n```\n\nNow these variables will be available in components globally and can be accessed the same way as in `nuxt.config.js`\n\nin `layouts/default.vue`\n\n```\n<template>\n  ...\n    <v-toolbar-title>{{ formattedAppTitle }}</v-toolbar-title>\n  ...\n</template\n\n<script>\n  ...\n\n  export default {\n    data () {\n      return {\n        appTitle: process.env.title,\n        appDescription: process.env.description\n      }\n    },\n    computed: {\n      formattedAppTitle() {\n        if (this.appTitle.length > 10) {\n          return this.appTitle.substring(0, 10) + '...'\n        } else {\n          return this.appTitle\n        }\n      },\n    }\n    ...\n  }\n</script>\n```\n\nThis is just a simple example of how I used it in the starter kit.  Notice I'm truncating the title string if it is more than 10 characters.  This is to insure the brand text doesn't overflow in the nav bar.  In the footer, I use the entire title and description.\n\nI hope you found this helpful.  I plan to post tips for Nuxt as I come across stumbling blocks during development.",
  "thumbnail": "/img/nuxt-tips.svg",
  "hero": "/img/nuxt-tips.svg"
}